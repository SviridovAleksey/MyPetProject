{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nimport { Component } from '@angular/core';\nimport { InstructionDTO, InstructStepService } from 'app/services/InstructStepsService';\nimport { AppService } from '../app/app.service';\nimport { HomeComponent } from '../home/home.component';\nlet InstructionsComponent = class InstructionsComponent {\n  constructor(_service, _home, _shareInstStepServ) {\n    this._service = _service;\n    this._home = _home;\n    this._shareInstStepServ = _shareInstStepServ;\n    this.listInstructionsUrl = 'http://localhost:8089/instruction-server/api/v1/instructions';\n    this.instructions = [];\n    this.prepareForDel = new InstructionDTO(null, 'UNKNOWN', 'UNKNOWN', null, null);\n    this.levelsUrl = 'http://localhost:8089/instruction-server/api/v1/levels';\n    this.levels = new Map();\n    this.showLevels = [];\n\n    this._shareInstStepServ.getInstructionsTrigger.subscribe(() => {\n      this.getInstructions();\n    });\n  }\n\n  ngOnInit() {\n    this.getLevels();\n    this.getInstructions();\n  }\n\n  sortInstructions(data) {\n    for (var i = 0; i < data.length; i++) {\n      this.levels.set(data[i].levelPlace, []);\n    }\n\n    for (var i = 0; i < data.length; i++) {\n      this.levels.get(data[i].levelPlace).push(data[i]);\n    }\n\n    this.showLevels = this.levels.get(0);\n  }\n\n  getLevelArr(level) {\n    if (level > 0) {\n      return this.levels.get(level);\n    }\n  }\n\n  nextLevelShow(level) {\n    this.showLevels = this.levels.get(level);\n    console.log(level + '    ' + this.showLevels);\n  }\n\n  openCloseCollaps(id) {\n    if (document.getElementById(\"collaps\" + id).style.display === \"block\") {\n      document.getElementById(\"collaps\" + id).style.display = \"none\";\n    } else {\n      document.getElementById(\"collaps\" + id).style.display = \"block\";\n    }\n  }\n\n  openRedactionInstruction(instruction) {\n    this._home.addNewStepViewerWithoutChangePage(instruction);\n\n    this._home.showTab('createNewInstructions');\n\n    this._shareInstStepServ.redactionInstructionTrigger.next(instruction);\n  }\n\n  deleteInstruction() {\n    document.getElementById(\"myModal\").style.display = \"none\";\n\n    this._service.delResource(this.listInstructionsUrl, this.prepareForDel.id).subscribe(() => {\n      this.getInstructions(), this._home.showTextMessageSuccess(' delete the instruction \"' + this.prepareForDel.name) + '\"';\n    }, error => {\n      for (var i = 0; i < error.error.messages.length; i++) {\n        this._home.showTextMessageErr(error.error.messages[i]);\n      }\n    });\n  }\n\n  openDelInstructWindow(instruction) {\n    document.getElementById(\"myModal\").style.display = \"block\";\n    this.prepareForDel = instruction;\n  }\n\n  showStepsInstruction(instruct) {\n    this._home.addNewStepViewer(instruct);\n\n    this._shareInstStepServ.getStepsEventSubject.next(instruct.id);\n  }\n\n  getInstructions() {\n    this._service.getResource(this.listInstructionsUrl).subscribe(data => this.instructions = data, error => {\n      for (var i = 0; i < error.error.messages.length; i++) {\n        this._home.showTextMessageErr(error.error.messages[i]);\n      }\n    });\n  }\n\n  getLevels() {\n    this._service.getResource(this.levelsUrl).subscribe(data => this.sortInstructions(data), error => {\n      for (var i = 0; i < error.error.messages.length; i++) {\n        this._home.showTextMessageErr(error.error.messages[i]);\n      }\n    });\n  }\n\n  flipCard(id) {\n    if (document.getElementById(\"flipInst\" + id).style.transform == 'rotateY(180deg)') {\n      document.getElementById(\"flipInst\" + id).style.transform = 'rotateY(0deg)';\n    } else {\n      document.getElementById(\"flipInst\" + id).style.transform = 'rotateY(180deg)';\n    }\n  }\n\n};\nInstructionsComponent = __decorate([Component({\n  selector: 'app-instructions',\n  templateUrl: './instructions.component.html',\n  styleUrls: ['./instructions.component.css']\n}), __metadata(\"design:paramtypes\", [AppService, HomeComponent, InstructStepService])], InstructionsComponent);\nexport { InstructionsComponent };","map":null,"metadata":{},"sourceType":"module"}