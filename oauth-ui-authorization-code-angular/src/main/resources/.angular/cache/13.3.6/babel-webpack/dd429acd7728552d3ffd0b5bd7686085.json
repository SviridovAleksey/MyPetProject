{"ast":null,"code":"import { FormGroup, FormBuilder, FormControl, FormArray } from '@angular/forms';\nimport { InstructStepService } from 'app/services/InstructStepsService';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"app/services/InstructStepsService\";\nimport * as i3 from \"@angular/common\";\n\nfunction CreateNewComponent_li_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 17)(1, \"div\", 18)(2, \"div\", 4)(3, \"div\", 5);\n    i0.ɵɵelement(4, \"textarea\", 19);\n    i0.ɵɵelementStart(5, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function CreateNewComponent_li_22_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const i_r2 = restoredCtx.index;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.flipCard(i_r2);\n    });\n    i0.ɵɵtext(6, \"\\u21BB\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"button\", 8);\n    i0.ɵɵtext(8, \"Add image\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 9)(10, \"div\", 5);\n    i0.ɵɵelement(11, \"textarea\", 19);\n    i0.ɵɵelementStart(12, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function CreateNewComponent_li_22_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const i_r2 = restoredCtx.index;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.flipCard(i_r2);\n    });\n    i0.ɵɵtext(13, \"\\u21BB\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(14, \"textarea\", 20);\n    i0.ɵɵelementStart(15, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function CreateNewComponent_li_22_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const i_r2 = restoredCtx.index;\n      const step_r1 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.onSubmitStep(i_r2, step_r1.controls);\n    });\n    i0.ɵɵtext(16, \"Save Step\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const step_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"flipNewStep\", i_r2, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", step_r1.controls.name.value)(\"formControl\", step_r1.controls.name);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"value\", step_r1.controls.name.value)(\"formControl\", step_r1.controls.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"formControl\", step_r1.controls.StepTextDTO.controls.text);\n  }\n}\n\nexport let CreateNewComponent = /*#__PURE__*/(() => {\n  class CreateNewComponent {\n    constructor(formBuilder, _shareInstStepServ) {\n      this.formBuilder = formBuilder;\n      this._shareInstStepServ = _shareInstStepServ;\n      this.newSteps = [];\n      this.stepInfoId = 0;\n      this.createContactForm();\n      this.createInstructionInfoForm();\n    }\n\n    ngOnInit() {}\n\n    createInstructionInfoForm() {\n      this.instructionInfoForm = new FormGroup({\n        name: new FormControl(''),\n        description: new FormControl(''),\n        levelDTO: new FormGroup({\n          name: new FormControl('unknown'),\n          level: new FormControl('0')\n        }),\n        constructDTO: new FormGroup({\n          name: new FormControl('unknown'),\n          value: new FormControl('0')\n        })\n      });\n    }\n\n    createContactForm() {\n      this.contactForm = new FormGroup({\n        sections: new FormArray([this.initNewStepSection()])\n      });\n    }\n\n    initNewStepSection() {\n      return new FormGroup({\n        name: new FormControl(''),\n        StepTextDTO: new FormGroup({\n          text: new FormControl('')\n        })\n      });\n    }\n\n    addSteps() {\n      const control = this.contactForm.get('sections');\n      control.push(this.initNewStepSection());\n    }\n\n    getSteps(form) {\n      return form.controls.sections.controls;\n    }\n\n    onSubmitStep(index, value) {\n      let stepTextDTO = {\n        text: value.StepTextDTO.value.text\n      };\n      let stepInfoDTO = {\n        stepPlace: index,\n        name: value.name.value,\n        infoId: this.stepInfoId,\n        stepTextDTO: stepTextDTO\n      };\n      this.newSteps[index] = stepInfoDTO;\n    }\n\n    createInstruction(instruction) {\n      let level = {\n        name: instruction.levelDTO.value.name,\n        level: instruction.levelDTO.value.level\n      };\n      let construct = {\n        name: instruction.constructDTO.value.name,\n        value: instruction.constructDTO.value.value\n      };\n      let instructionInfo = {\n        id: 0,\n        name: instruction.name.value,\n        description: instruction.description.value,\n        levelDTO: level,\n        constructDTO: construct\n      };\n\n      this._shareInstStepServ.getEventCreateInstruction.next(instructionInfo);\n    }\n\n    flipNewInst() {\n      if (document.getElementById(\"flipNewInst\").style.transform == 'rotateY(180deg)') {\n        document.getElementById(\"flipNewInst\").style.transform = 'rotateY(0deg)';\n      } else {\n        document.getElementById(\"flipNewInst\").style.transform = 'rotateY(180deg)';\n      }\n    }\n\n    flipCard(id) {\n      if (document.getElementById(\"flipNewStep\" + id).style.transform == 'rotateY(180deg)') {\n        document.getElementById(\"flipNewStep\" + id).style.transform = 'rotateY(0deg)';\n      } else {\n        document.getElementById(\"flipNewStep\" + id).style.transform = 'rotateY(180deg)';\n      }\n    }\n\n  }\n\n  CreateNewComponent.ɵfac = function CreateNewComponent_Factory(t) {\n    return new (t || CreateNewComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.InstructStepService));\n  };\n\n  CreateNewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateNewComponent,\n    selectors: [[\"app-create-new-instructions\"]],\n    decls: 26,\n    vars: 5,\n    consts: [[3, \"formGroup\"], [1, \"newInstContainer\"], [1, \"flip-cardNewInst\"], [\"id\", \"flipNewInst\", 1, \"flip-card-inner\"], [1, \"flip-card-front\"], [1, \"nameTurnContainer\"], [\"type\", \"text\", \"placeholder\", \"Instruction name\", \"maxlength\", \"20\", \"formControlName\", \"name\", 1, \"inputPlaceName\", 3, \"value\"], [1, \"buttonTurn\", 3, \"click\"], [1, \"btn\"], [1, \"flip-card-back\"], [\"name\", \"newStepText\", \"placeholder\", \"Description\", \"maxlength\", \"120\", \"formControlName\", \"description\", 1, \"inputPlaceText\"], [1, \"btn\", 3, \"click\"], [\"formArrayName\", \"sections\"], [1, \"stepContainer\"], [\"class\", \"flip-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"flip-card\", 3, \"click\"], [1, \"newCard\"], [1, \"flip-card\"], [1, \"flip-card-inner\", 3, \"id\"], [\"type\", \"text\", \"placeholder\", \"Step name\", \"maxlength\", \"20\", 1, \"inputPlaceName\", 3, \"value\", \"formControl\"], [\"name\", \"newStepText\", \"placeholder\", \"Step text\", \"maxlength\", \"120\", 1, \"inputPlaceText\", 3, \"formControl\"], [\"type\", \"submit\", 1, \"btn\", 3, \"click\"]],\n    template: function CreateNewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5);\n        i0.ɵɵelement(6, \"textarea\", 6);\n        i0.ɵɵelementStart(7, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function CreateNewComponent_Template_button_click_7_listener() {\n          return ctx.flipNewInst();\n        });\n        i0.ɵɵtext(8, \"\\u21BB\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"button\", 8);\n        i0.ɵɵtext(10, \"Add image\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 9)(12, \"div\", 5);\n        i0.ɵɵelement(13, \"textarea\", 6);\n        i0.ɵɵelementStart(14, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function CreateNewComponent_Template_button_click_14_listener() {\n          return ctx.flipNewInst();\n        });\n        i0.ɵɵtext(15, \"\\u21BB\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(16, \"textarea\", 10);\n        i0.ɵɵelementStart(17, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function CreateNewComponent_Template_button_click_17_listener() {\n          return ctx.createInstruction(ctx.instructionInfoForm.controls);\n        });\n        i0.ɵɵtext(18, \"Create instruction\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(19, \"form\", 0)(20, \"div\", 12)(21, \"ul\", 13);\n        i0.ɵɵtemplate(22, CreateNewComponent_li_22_Template, 17, 6, \"li\", 14);\n        i0.ɵɵelementStart(23, \"li\", 15);\n        i0.ɵɵlistener(\"click\", function CreateNewComponent_Template_li_click_23_listener() {\n          return ctx.addSteps();\n        });\n        i0.ɵɵelementStart(24, \"div\", 16);\n        i0.ɵɵtext(25, \"+\");\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.instructionInfoForm);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"value\", ctx.instructionInfoForm.controls.name.value);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"value\", ctx.instructionInfoForm.controls.name.value);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.contactForm);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.getSteps(ctx.contactForm));\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.DefaultValueAccessor, i1.MaxLengthValidator, i1.NgControlStatus, i1.FormControlName, i1.FormArrayName, i3.NgForOf, i1.FormControlDirective],\n    styles: [\".newInstContainer[_ngcontent-%COMP%]{width:100%;margin:3% -.29%;list-style:none;padding:0;text-align:-webkit-center}.flip-cardNewInst[_ngcontent-%COMP%]{background-color:transparent;height:300px;width:24.4%;padding:.3%}.flip-cardNewInst[_ngcontent-%COMP%]   .flip-card-front[_ngcontent-%COMP%]{background-color:#f44336;color:#000}.flip-cardNewInst[_ngcontent-%COMP%]   .flip-card-back[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.stepContainer[_ngcontent-%COMP%]{width:100%;margin:0 -.29%;list-style:none;padding:0}.flip-card[_ngcontent-%COMP%]{background-color:transparent;float:left;height:300px;width:24.4%;padding:.3%}.flip-card-inner[_ngcontent-%COMP%]{display:inline-block;width:100%;height:100%;text-align:center;transition:transform .6s;transform-style:preserve-3d;box-shadow:0 4px 8px #0003}.flip-card-front[_ngcontent-%COMP%], .flip-card-back[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden}.flip-card-front[_ngcontent-%COMP%]{background-color:#bbb;color:#000}.flip-card-back[_ngcontent-%COMP%]{background-color:#2980b9;color:#fff;transform:rotateY(180deg)}.nameTurnContainer[_ngcontent-%COMP%]{width:95%;display:flex;-webkit-margin-end:auto;margin-inline-end:auto;word-break:break-word}.btn[_ngcontent-%COMP%]{background:border-box;margin-top:auto;border:none;color:#fff;padding:12px 30px;cursor:pointer;font-size:20px;width:100%}.btn[_ngcontent-%COMP%]:hover{background-color:#1abc9c}.buttonTurn[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff;padding-right:15px;width:5%;text-align:center;text-decoration:none;display:inline-block;font-size:16px;cursor:pointer;border-radius:50%;-webkit-margin-end:auto;margin-inline-end:auto}.newCard[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1abc9c;width:100%;height:100%;justify-content:center;align-items:center;color:#fff;font-size:350%}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}textarea[_ngcontent-%COMP%]::placeholder{color:#fff}.inputPlaceName[_ngcontent-%COMP%]{width:95%;padding-top:5%;align-self:center;background-color:transparent;color:#fff;border:none;font-size:160%;text-align:center;resize:none;outline:none;padding-left:10%}.inputPlaceText[_ngcontent-%COMP%]{width:95%;padding-top:5%;height:100%;align-self:center;background-color:transparent;color:#fff;border:none;font-size:140%;text-align:center;resize:none;overflow:hidden;outline:none}@media (max-width: 795px){.newInstContainer[_ngcontent-%COMP%]{margin:5% 0}.flip-cardNewInst[_ngcontent-%COMP%]{width:99.4%;height:200px;display:block;margin-bottom:5px}.stepContainer[_ngcontent-%COMP%]{margin:0}.flip-card[_ngcontent-%COMP%]{width:99.4%;height:200px;display:block;margin-bottom:5px}.inputPlaceText[_ngcontent-%COMP%]{padding-top:0}}\"]\n  });\n  return CreateNewComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}