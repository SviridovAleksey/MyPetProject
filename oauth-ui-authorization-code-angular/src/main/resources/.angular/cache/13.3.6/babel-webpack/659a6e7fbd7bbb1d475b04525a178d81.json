{"ast":null,"code":"import { InstructStepService } from 'app/services/InstructStepsService';\nimport { AppService } from '../app/app.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../app/app.service\";\nimport * as i2 from \"app/services/InstructStepsService\";\n\nfunction HomeComponent_a_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 2);\n    i0.ɵɵlistener(\"click\", function HomeComponent_a_5_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.showTab(\"fooPage\");\n    });\n    i0.ɵɵtext(1, \"Foo\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_6_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.showTab(\"instructionPage\");\n    });\n    i0.ɵɵtext(2, \"Instructions\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 15)(4, \"a\", 2);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_6_Template_a_click_4_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.showTab(\"createNewInstructions\");\n    });\n    i0.ɵɵtext(5, \"Add new\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction HomeComponent_div_7_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"a\", 2);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_7_div_1_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const singInst_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.showNewStepViewer(singInst_r12.key);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 2);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_7_div_1_Template_a_click_3_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const i_r13 = i0.ɵɵnextContext().index;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.closeStepViewer(i_r13);\n    });\n    i0.ɵɵtext(4, \"\\u00D7\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext();\n    const i_r13 = ctx_r20.index;\n    const singInst_r12 = ctx_r20.$implicit;\n    i0.ɵɵpropertyInterpolate(\"id\", i_r13);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(singInst_r12.key.name);\n  }\n}\n\nfunction HomeComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, HomeComponent_div_7_div_1_Template, 5, 2, \"div\", 16);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const singInst_r12 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isLoggedIn && singInst_r12.value);\n  }\n}\n\nfunction HomeComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 18)(2, \"span\", 19);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_10_Template_span_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r24);\n      const i_r22 = restoredCtx.index;\n      const ctx_r23 = i0.ɵɵnextContext();\n      return ctx_r23.closeMessage(i_r22);\n    });\n    i0.ɵɵtext(3, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"strong\");\n    i0.ɵɵtext(5, \"Success!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const message_r21 = ctx.$implicit;\n    const i_r22 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"messageText\", i_r22, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", message_r21, \" \");\n  }\n}\n\nfunction HomeComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵelement(1, \"app-instructions\", 21)(2, \"foo-details\", 21)(3, \"app-steps\", 21)(4, \"app-create-new-instructions\", 21);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"hidden\", !ctx_r4.tabs[2].value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"hidden\", !ctx_r4.tabs[1].value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"hidden\", !ctx_r4.tabs[3].value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"hidden\", !ctx_r4.tabs[4].value);\n  }\n}\n\nfunction HomeComponent_a_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 22);\n    i0.ɵɵlistener(\"click\", function HomeComponent_a_17_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.login();\n    });\n    i0.ɵɵtext(1, \"Login\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_div_18_a_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 25);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_18_a_9_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext(2);\n      return ctx_r28.logout();\n    });\n    i0.ɵɵtext(1, \"Logout\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"a\", 23);\n    i0.ɵɵtext(2, \"Account\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 23);\n    i0.ɵɵtext(4, \"Friends\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"a\", 23);\n    i0.ɵɵtext(6, \"Groups\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"a\", 23);\n    i0.ɵɵtext(8, \"News\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, HomeComponent_div_18_a_9_Template, 2, 0, \"a\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.isLoggedIn);\n  }\n}\n\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(_service, _shareInstStepServ) {\n      this._service = _service;\n      this._shareInstStepServ = _shareInstStepServ;\n      this.isLoggedIn = false;\n      this.tabs = [{\n        key: 'homePage',\n        value: true\n      }, {\n        key: 'fooPage',\n        value: false\n      }, {\n        key: 'instructionPage',\n        value: false\n      }, {\n        key: 'stepsPage',\n        value: false\n      }, {\n        key: 'createNewInstructions',\n        value: false\n      }];\n      this.singleInstruction = [];\n      this.messageText = [];\n    }\n\n    createNewInstruction(instructionInfo) {\n      let instInfo = instructionInfo;\n\n      if (instInfo.name == '') {\n        instInfo.name = \"New instruction\";\n      }\n\n      this.showNewStepViewer(instInfo);\n    }\n\n    ngOnInit() {\n      this.isLoggedIn = this._service.checkCredentials();\n      let i = window.location.href.indexOf('code');\n\n      if (!this.isLoggedIn && i != -1) {\n        this._service.retrieveToken(window.location.href.substring(i + 5));\n      }\n    }\n\n    login() {\n      window.location.href = 'http://localhost:8083/auth/realms/sviridov/protocol/openid-connect/auth?response_type=code&&scope=openid%20write%20read&client_id=' + this._service.clientId + '&redirect_uri=' + this._service.redirectUri;\n    }\n\n    logout() {\n      this._service.logout();\n    }\n\n    showTab(tab) {\n      for (var i = 0; i < this.tabs.length; i++) {\n        if (this.tabs[i].key == tab) {\n          if (this.tabs[i].key == 'instructionPage') {\n            this._shareInstStepServ.getInstructionsTrigger.next();\n          }\n\n          if (this.tabs[i].key == 'createNewInstructions') {\n            this._shareInstStepServ.clearNewInstructionFormTrigger.next();\n          }\n\n          this.tabs[i].value = true;\n        } else {\n          this.tabs[i].value = false;\n        }\n      }\n    }\n\n    openCloseNav() {\n      if (document.getElementById(\"mySidebar\").style.width == '250px') {\n        document.getElementById(\"mySidebar\").style.width = '0';\n      } else {\n        document.getElementById(\"mySidebar\").style.width = '250px';\n      }\n    }\n\n    closeStepViewer(i) {\n      this.singleInstruction.splice(i, 1);\n      this.showTab('instructionPage');\n    }\n\n    addNewStepViewer(instruct) {\n      this.addStepsViewer(instruct);\n      this.showTab('stepsPage');\n    }\n\n    addNewStepViewerWithoutChangePage(instruct) {\n      this.addStepsViewer(instruct);\n    }\n\n    addStepsViewer(instruct) {\n      if (!this.forEachStepViewer(instruct)) {\n        this.singleInstruction.unshift({\n          key: instruct,\n          value: true\n        });\n      }\n\n      if (this.singleInstruction.length > 5) {\n        this.singleInstruction.length = 5;\n      }\n    }\n\n    showNewStepViewer(instruct) {\n      this.forEachStepViewer(instruct);\n\n      this._shareInstStepServ.getStepsEventSubject.next(instruct.id);\n\n      this.showTab('stepsPage');\n    }\n\n    forEachStepViewer(instruct) {\n      let isExist = false;\n\n      for (var i = 0; i < this.singleInstruction.length; i++) {\n        if (this.singleInstruction[i].key.id == instruct.id) {\n          this.singleInstruction[i].key.name = instruct.name;\n          this.singleInstruction[i].value = true;\n          isExist = true;\n        }\n      }\n\n      return isExist;\n    }\n\n    closeNewStepViewer(name) {\n      for (var i = 0; i < this.singleInstruction.length; i++) {\n        if (this.singleInstruction[i].key.name == name) {\n          this.singleInstruction[i].value = false;\n        }\n      }\n    }\n\n    closeMessage(id) {\n      this.messageText.splice(id, 1);\n    }\n\n    showTextMessage(text) {\n      this.messageText.unshift(text);\n      this.hideMessage(this.messageText.length - 1);\n    }\n\n    hideMessage(id) {\n      setTimeout(() => {\n        this.closeMessage(id);\n      }, 3000);\n    }\n\n  }\n\n  HomeComponent.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.AppService), i0.ɵɵdirectiveInject(i2.InstructStepService));\n  };\n\n  HomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"home-header\"]],\n    features: [i0.ɵɵProvidersFeature([AppService])],\n    decls: 19,\n    vars: 11,\n    consts: [[1, \"navbar\"], [\"href\", \"#\", \"id\", \"main\", 3, \"click\"], [\"href\", \"#\", 3, \"click\"], [\"href\", \"#\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"dropdown\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"name\", \"search\", \"placeholder\", \"Search..\", 1, \"searchInput\"], [3, \"click\"], [\"class\", \"content\", 4, \"ngIf\"], [\"id\", \"mySidebar\", 1, \"sidebar\"], [\"href\", \"javascript:void(0)\", 1, \"closebtn\", 3, \"click\"], [\"href\", \"#\", \"class\", \"right\", \"type\", \"submit\", 3, \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"dropdown\"], [1, \"dropbtn\", 3, \"click\"], [1, \"dropdown-content\"], [3, \"id\", 4, \"ngIf\"], [3, \"id\"], [1, \"alert\", 3, \"id\"], [1, \"closebtn\", 3, \"click\"], [1, \"content\"], [3, \"hidden\"], [\"href\", \"#\", \"type\", \"submit\", 1, \"right\", 3, \"click\"], [\"href\", \"#\"], [\"href\", \"#\", \"class\", \"right\", 3, \"click\", 4, \"ngIf\"], [\"href\", \"#\", 1, \"right\", 3, \"click\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"a\", 1);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_a_click_1_listener() {\n          return ctx.openCloseNav();\n        });\n        i0.ɵɵtext(2, \"\\u2630\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"a\", 2);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_a_click_3_listener() {\n          return ctx.showTab(\"homePage\");\n        });\n        i0.ɵɵtext(4, \"Home\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(5, HomeComponent_a_5_Template, 2, 0, \"a\", 3);\n        i0.ɵɵtemplate(6, HomeComponent_div_6_Template, 6, 0, \"div\", 4);\n        i0.ɵɵtemplate(7, HomeComponent_div_7_Template, 2, 1, \"div\", 5);\n        i0.ɵɵpipe(8, \"slice\");\n        i0.ɵɵelement(9, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, HomeComponent_div_10_Template, 7, 2, \"div\", 5);\n        i0.ɵɵelementStart(11, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_11_listener() {\n          return ctx.showTextMessage(\"myTest\");\n        });\n        i0.ɵɵtext(12, \"add Message\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(13, HomeComponent_div_13_Template, 5, 4, \"div\", 8);\n        i0.ɵɵelementStart(14, \"div\", 9)(15, \"a\", 10);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_a_click_15_listener() {\n          return ctx.openCloseNav();\n        });\n        i0.ɵɵtext(16, \"\\u00D7\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, HomeComponent_a_17_Template, 2, 0, \"a\", 11);\n        i0.ɵɵtemplate(18, HomeComponent_div_18_Template, 10, 1, \"div\", 12);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(8, 7, ctx.singleInstruction, 0, 5));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.messageText);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n      }\n    },\n    styles: [\".navbar[_ngcontent-%COMP%]{overflow:hidden;background-color:#333;top:0;margin-bottom:5px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:left;display:block;color:#fff;text-align:center;padding:14px 20px;text-decoration:none}.navbar[_ngcontent-%COMP%]   a.right[_ngcontent-%COMP%]{float:right}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .dropdown[_ngcontent-%COMP%]:hover   .dropbtn[_ngcontent-%COMP%]{background-color:#ddd;color:#000}.navbar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#666;color:#fff}.sidebar[_ngcontent-%COMP%]{height:100%;width:0;position:fixed;z-index:1;top:0;left:0;background-color:#111;overflow-x:hidden;transition:.5s;padding-top:60px}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 8px 8px 32px;text-decoration:none;font-size:25px;color:#818181;display:block;transition:.3s}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f1f1f1}.sidebar[_ngcontent-%COMP%]   .closebtn[_ngcontent-%COMP%]{position:absolute;top:0;right:25px;font-size:36px;margin-left:50px}@media screen and (max-height: 450px){.sidebar[_ngcontent-%COMP%]{padding-top:15px}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}.searchInput[_ngcontent-%COMP%]{width:8%;border:0;border-radius:4px;font-size:100%;background:border-box;background-repeat:no-repeat;padding:16px;transition:width .4s ease-in-out;float:right;color:#fff}.searchInput[_ngcontent-%COMP%]:focus{background-color:#ddd;color:#000;border:0;width:30%}@media screen and (max-width: 600px){.searchInput[_ngcontent-%COMP%]:focus{width:93%}.searchInput[_ngcontent-%COMP%]{width:15%}}.dropdown[_ngcontent-%COMP%]{float:left;overflow:hidden}.dropdown[_ngcontent-%COMP%]   .dropbtn[_ngcontent-%COMP%]{font-size:16px;border:none;outline:none;color:#fff;padding:14px 16px;background-color:inherit;font-family:inherit;margin:0}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#f9f9f9;min-width:160px;box-shadow:0 8px 16px #0003;z-index:1}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:none;color:#000;padding:12px 16px;text-decoration:none;display:block;text-align:left}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ddd}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.alert[_ngcontent-%COMP%]{padding:20px;background-color:#f44336;color:#fff;border:solid;margin:-3px}.closebtn[_ngcontent-%COMP%]{margin-left:15px;color:#fff;font-weight:700;float:right;font-size:22px;line-height:20px;cursor:pointer;transition:.3s}.closebtn[_ngcontent-%COMP%]:hover{color:#000}\"]\n  });\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}